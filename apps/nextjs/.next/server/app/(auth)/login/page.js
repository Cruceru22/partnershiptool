(()=>{var e={};e.id=72,e.ids=[72],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10709:(e,r,t)=>{"use strict";t.d(r,{LoginForm:()=>s});let s=(0,t(24621).registerClientReference)(function(){throw Error("Attempted to call LoginForm() from the server but LoginForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/login/_components/login-form.tsx","LoginForm")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14495:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(41409),i=t(17748),n=t(61089);let o=i.forwardRef(({className:e,type:r,...t},i)=>(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...t}));o.displayName="Input"},14817:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>a,wL:()=>u});var s=t(41409),i=t(17748),n=t(61089);let o=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));o.displayName="Card";let a=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));a.displayName="CardHeader";let l=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let c=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let d=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent";let u=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},14985:e=>{"use strict";e.exports=require("dns")},18123:(e,r,t)=>{Promise.resolve().then(t.bind(t,10709))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24303:(e,r,t)=>{"use strict";t.d(r,{LoginForm:()=>p});var s=t(41409),i=t(17748),n=t(1779),o=t(47706),a=t(86119),l=t(14817),c=t(14495),d=t(64057),u=t(53796);function p({className:e,redirectUrl:r,...t}){let p=(0,n.useRouter)(),x=(0,n.useSearchParams)(),m=r||x.get("redirect")||"/",[f,h]=(0,i.useState)(""),[g,v]=(0,i.useState)(""),[b,y]=(0,i.useState)(!1),[j,N]=(0,i.useState)(""),[w,q]=(0,i.useState)(!1);async function P(e){if(e.preventDefault(),!f){N("Please enter your email address");return}y(!0),N("");try{await o.y.emailOtp.sendVerificationOtp({email:f,type:"sign-in"}),q(!0)}catch(e){console.error(e),N("Failed to send verification code")}finally{y(!1)}}async function C(e){if(e.preventDefault(),!g){N("Please enter the verification code");return}if(!/^\d{6}$/.test(g)){N("Verification code must be 6 digits");return}y(!0),N("");try{let e=!1,r="Invalid verification code. Please try again or request a new code.";try{let t=await fetch("/api/auth/sign-in/email-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,otp:g})});if(t.ok)e=!0;else{try{let e=await t.json();e?.message&&(r=e.message)}catch(e){console.error("Error parsing JSON:",e)}throw N(r),Error(r)}}catch(e){throw console.error("Fetch error:",e),N(r),e}if(e)console.log("Login successful, redirecting to:",m),p.push(m),p.refresh();else throw N(r),Error("Verification failed")}catch(e){console.error("Verification error:",e),j||N("Invalid verification code. Please try again or request a new code.")}finally{y(!1)}}async function k(){try{y(!0),await o.y.signIn.social({provider:"google",callbackURL:m})}catch(e){console.error(e),N("Failed to sign in with Google"),y(!1)}}return(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-6",e),...t,children:[(0,s.jsx)(l.Zp,{className:"overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"grid p-0 md:grid-cols-2",children:[w?(0,s.jsx)("form",{className:"p-6 md:p-8",onSubmit:C,children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Verify your email"}),(0,s.jsxs)("p",{className:"text-balance text-muted-foreground",children:["Enter the verification code sent to ",f]})]}),j&&(0,s.jsx)("div",{className:"rounded bg-red-100 p-2 text-center text-sm text-red-600",children:j}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(d.J,{htmlFor:"otp",children:"Verification Code"}),(0,s.jsx)(c.p,{id:"otp",type:"text",placeholder:"123456",required:!0,value:g,onChange:e=>v(e.target.value),disabled:b,className:"text-center text-xl tracking-widest",maxLength:6})]}),(0,s.jsx)(a.$,{type:"submit",className:"w-full",disabled:b,children:b?"Verifying...":"Verify and sign in"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.$,{type:"button",variant:"outline",className:"w-full",onClick:()=>q(!1),disabled:b,children:"Back to email"}),(0,s.jsx)(a.$,{type:"button",variant:"ghost",className:"w-full",onClick:P,disabled:b,children:"Request new code"})]})]})}):(0,s.jsx)("form",{className:"p-6 md:p-8",onSubmit:P,children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Welcome back"}),(0,s.jsx)("p",{className:"text-balance text-muted-foreground",children:"Enter your email to receive a verification code"})]}),j&&(0,s.jsx)("div",{className:"rounded bg-red-100 p-2 text-center text-sm text-red-600",children:j}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(d.J,{htmlFor:"email",children:"Email"}),(0,s.jsx)(c.p,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:f,onChange:e=>h(e.target.value),disabled:b})]}),(0,s.jsx)(a.$,{type:"submit",className:"w-full",disabled:b,children:b?"Sending...":"Send verification code"}),(0,s.jsx)("div",{className:"relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t after:border-border",children:(0,s.jsx)("span",{className:"relative z-10 bg-background px-2 text-muted-foreground",children:"Or continue with"})}),(0,s.jsxs)(a.$,{type:"button",variant:"outline",className:"flex w-full items-center justify-center gap-2",onClick:k,disabled:b,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-5 w-5",children:(0,s.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z",fill:"currentColor"})}),"Sign in with Google"]}),(0,s.jsxs)("div",{className:"text-center text-sm",children:["Don't have an account?"," ",(0,s.jsx)("a",{href:`/signup?redirect=${encodeURIComponent(m)}`,className:"underline underline-offset-4",children:"Sign up"})]})]})}),(0,s.jsx)("div",{className:"relative hidden bg-muted md:block",children:(0,s.jsx)("img",{src:"/placeholder.svg",alt:"Image",className:"absolute inset-0 h-full w-full object-cover dark:brightness-[0.2] dark:grayscale"})})]})}),(0,s.jsxs)("div",{className:"text-balance text-center text-xs text-muted-foreground [&_a]:underline [&_a]:underline-offset-4 hover:[&_a]:text-primary",children:["By clicking continue, you agree to our ",(0,s.jsx)("a",{href:"#",children:"Terms of Service"})," ","and ",(0,s.jsx)("a",{href:"#",children:"Privacy Policy"}),"."]})]})}},26253:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=t(93997),i=t(31450),n=t(30500),o=t.n(n),a=t(38515),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);t.d(r,l);let c={children:["",{children:["(auth)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,78780)),"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,72933)),"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,31248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,19625,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,93782,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,76955)),"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,31248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,19625,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,93782,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/login/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(auth)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},41204:e=>{"use strict";e.exports=require("string_decoder")},44708:e=>{"use strict";e.exports=require("node:https")},47706:(e,r,t)=>{"use strict";t.d(r,{y:()=>n});var s=t(18149),i=t(16632);let n=(0,t(86177).MB)({plugins:[(0,i.N$)(),(0,i.VY)(),(0,s.X)({subscription:!0})]})},50232:(e,r,t)=>{Promise.resolve().then(t.bind(t,24303))},50941:()=>{},53796:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(77765),i=t(91698);function n(...e){return(0,i.QP)((0,s.cx)(e))}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64057:(e,r,t)=>{"use strict";t.d(r,{J:()=>c});var s=t(41409),i=t(17748),n=t(97618),o=t(67633),a=t(61089);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)(n.b,{ref:t,className:(0,a.cn)(l(),e),...r}));c.displayName=n.b.displayName},72933:(e,r,t)=>{"use strict";function s({children:e}){return e}t.r(r),t.d(r,{default:()=>s})},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},78780:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(76875),i=t(44753),n=t(51694),o=t(48346),a=t(76880),l=t(10709);async function c({searchParams:e}){let r=e.redirect||"/",t=await o.j2.api.getSession({headers:await (0,i.b3)()});if(t){let e=t.session.activeOrganizationId;if(console.log("Active organization ID:",e),!e&&"/pricing"===r)return console.log("Redirecting to pricing page as requested"),(0,n.redirect)("/pricing");if(!e)return console.log("No active organization, redirecting to pricing"),(0,n.redirect)("/pricing");let s=await a.db.query.organization.findFirst({where:(r,{eq:t})=>t(r.id,e)});return s?(console.log("Redirecting to organization:",s.slug),(0,n.redirect)(`/${s.slug}`)):(console.log("Organization not found, redirecting to pricing"),(0,n.redirect)("/pricing"))}return(0,s.jsx)("div",{className:"flex min-h-svh flex-col items-center justify-center p-6 md:p-10",children:(0,s.jsx)("div",{className:"w-full max-w-sm md:max-w-3xl",children:(0,s.jsx)(l.LoginForm,{redirectUrl:r})})})}},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},94909:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1597,6901,8763,1725,3288,3707,8237,1445],()=>t(26253));module.exports=s})();