(()=>{var e={};e.id=2271,e.ids=[2271],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11939:(e,r,t)=>{Promise.resolve().then(t.bind(t,27987))},14495:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var s=t(41409),i=t(17748),a=t(61089);let n=i.forwardRef(({className:e,type:r,...t},i)=>(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...t}));n.displayName="Input"},14817:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>u});var s=t(41409),i=t(17748),a=t(61089);let n=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));n.displayName="Card";let o=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let l=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let d=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let u=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20049:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(76875),i=t(44753),a=t(51694),n=t(48346),o=t(76880),l=t(27987);async function d(){let e=await n.j2.api.getSession({headers:await (0,i.b3)()});if(e){let r=e.session.activeOrganizationId;console.log(r),r||(0,a.redirect)("/");let t=await o.db.query.organization.findFirst({where:(e,{eq:t})=>t(e.id,r)});t||(0,a.redirect)("/"),(0,a.redirect)(`/${t.slug}`)}return(0,s.jsx)("div",{className:"flex min-h-svh flex-col items-center justify-center p-6 md:p-10",children:(0,s.jsx)("div",{className:"w-full max-w-sm md:max-w-3xl",children:(0,s.jsx)(l.SignupForm,{})})})}},26011:(e,r,t)=>{Promise.resolve().then(t.bind(t,39405))},27910:e=>{"use strict";e.exports=require("stream")},27987:(e,r,t)=>{"use strict";t.d(r,{SignupForm:()=>s});let s=(0,t(24621).registerClientReference)(function(){throw Error("Attempted to call SignupForm() from the server but SignupForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/signup/_components/signup-form.tsx","SignupForm")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},39405:(e,r,t)=>{"use strict";t.d(r,{SignupForm:()=>p});var s=t(41409),i=t(17748),a=t(1779),n=t(47706),o=t(86119),l=t(14817),d=t(14495),c=t(64057),u=t(53796);function p({className:e,...r}){let t=(0,a.useRouter)(),[p,x]=(0,i.useState)(""),[m,f]=(0,i.useState)(""),[h,g]=(0,i.useState)(""),[v,b]=(0,i.useState)(!1),[j,y]=(0,i.useState)(""),[N,w]=(0,i.useState)(!1);async function q(e){if(e.preventDefault(),!m||!p){y("Please enter your name and email address");return}b(!0),y("");try{await n.y.emailOtp.sendVerificationOtp({email:m,type:"sign-in"}),w(!0)}catch(e){console.error(e),y("Failed to send verification code")}finally{b(!1)}}async function P(e){if(e.preventDefault(),!h){y("Please enter the verification code");return}if(!/^\d{6}$/.test(h)){y("Verification code must be 6 digits");return}b(!0),y("");try{let e=!1,r="Invalid verification code. Please try again or request a new code.";try{let t=await fetch("/api/auth/sign-in/email-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,otp:h})});if(t.ok)e=!0;else{try{let e=await t.json();e?.message&&(r=e.message)}catch(e){console.error("Error parsing JSON:",e)}throw y(r),Error(r)}}catch(e){throw console.error("Fetch error:",e),y(r),e}if(e)t.push("/"),t.refresh();else throw y(r),Error("Verification failed")}catch(e){console.error("Verification error:",e),j||y("Invalid verification code. Please try again or request a new code.")}finally{b(!1)}}async function C(){try{b(!0),await n.y.signIn.social({provider:"google",callbackURL:"/signup"})}catch(e){console.error(e),y("Failed to sign up with Google"),b(!1)}}return(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-6",e),...r,children:[(0,s.jsx)(l.Zp,{className:"overflow-hidden",children:(0,s.jsxs)(l.Wu,{className:"grid p-0 md:grid-cols-2",children:[N?(0,s.jsx)("form",{className:"p-6 md:p-8",onSubmit:P,children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Verify your email"}),(0,s.jsxs)("p",{className:"text-balance text-muted-foreground",children:["Enter the verification code sent to ",m]})]}),j&&(0,s.jsx)("div",{className:"rounded bg-red-100 p-2 text-center text-sm text-red-600",children:j}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.J,{htmlFor:"otp",children:"Verification Code"}),(0,s.jsx)(d.p,{id:"otp",type:"text",placeholder:"123456",required:!0,value:h,onChange:e=>g(e.target.value),disabled:v,className:"text-center text-xl tracking-widest",maxLength:6})]}),(0,s.jsx)(o.$,{type:"submit",className:"w-full",disabled:v,children:v?"Verifying...":"Verify and sign up"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(o.$,{type:"button",variant:"outline",className:"w-full",onClick:()=>w(!1),disabled:v,children:"Back to email"}),(0,s.jsx)(o.$,{type:"button",variant:"ghost",className:"w-full",onClick:q,disabled:v,children:"Request new code"})]})]})}):(0,s.jsx)("form",{className:"p-6 md:p-8",onSubmit:q,children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Create an account"}),(0,s.jsx)("p",{className:"text-balance text-muted-foreground",children:"Sign up to get started with our platform"})]}),j&&(0,s.jsx)("div",{className:"rounded bg-red-100 p-2 text-center text-sm text-red-600",children:j}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.J,{htmlFor:"name",children:"Full Name"}),(0,s.jsx)(d.p,{id:"name",type:"text",placeholder:"John Doe",required:!0,value:p,onChange:e=>x(e.target.value),disabled:v})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,s.jsx)(d.p,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:m,onChange:e=>f(e.target.value),disabled:v})]}),(0,s.jsx)(o.$,{type:"submit",className:"w-full",disabled:v,children:v?"Sending...":"Send verification code"}),(0,s.jsx)("div",{className:"relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t after:border-border",children:(0,s.jsx)("span",{className:"relative z-10 bg-background px-2 text-muted-foreground",children:"Or continue with"})}),(0,s.jsxs)(o.$,{type:"button",variant:"outline",className:"flex w-full items-center justify-center gap-2",onClick:C,disabled:v,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-5 w-5",children:(0,s.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z",fill:"currentColor"})}),"Sign up with Google"]}),(0,s.jsxs)("div",{className:"text-center text-sm",children:["Already have an account?"," ",(0,s.jsx)("a",{href:"/login",className:"underline underline-offset-4",children:"Log in"})]})]})}),(0,s.jsx)("div",{className:"relative hidden bg-muted md:block",children:(0,s.jsx)("img",{src:"/placeholder.svg",alt:"Image",className:"absolute inset-0 h-full w-full object-cover dark:brightness-[0.2] dark:grayscale"})})]})}),(0,s.jsxs)("div",{className:"text-balance text-center text-xs text-muted-foreground [&_a]:underline [&_a]:underline-offset-4 hover:[&_a]:text-primary",children:["By clicking continue, you agree to our ",(0,s.jsx)("a",{href:"#",children:"Terms of Service"})," ","and ",(0,s.jsx)("a",{href:"#",children:"Privacy Policy"}),"."]})]})}},41204:e=>{"use strict";e.exports=require("string_decoder")},44708:e=>{"use strict";e.exports=require("node:https")},47706:(e,r,t)=>{"use strict";t.d(r,{y:()=>a});var s=t(18149),i=t(16632);let a=(0,t(86177).MB)({plugins:[(0,i.N$)(),(0,i.VY)(),(0,s.X)({subscription:!0})]})},50941:()=>{},53796:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(77765),i=t(91698);function a(...e){return(0,i.QP)((0,s.cx)(e))}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64057:(e,r,t)=>{"use strict";t.d(r,{J:()=>d});var s=t(41409),i=t(17748),a=t(97618),n=t(67633),o=t(61089);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)(a.b,{ref:t,className:(0,o.cn)(l(),e),...r}));d.displayName=a.b.displayName},72933:(e,r,t)=>{"use strict";function s({children:e}){return e}t.r(r),t.d(r,{default:()=>s})},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},92193:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(93997),i=t(31450),a=t(30500),n=t.n(a),o=t(38515),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["(auth)",{children:["signup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,20049)),"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/signup/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,72933)),"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,31248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,19625,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,93782,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,76955)),"/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,31248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,19625,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,93782,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/andreicruceru/partnership-tool/apps/nextjs/src/app/(auth)/signup/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(auth)/signup/page",pathname:"/signup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},94735:e=>{"use strict";e.exports=require("events")},94909:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1597,6901,8763,1725,3288,3707,8237,1445],()=>t(92193));module.exports=s})();