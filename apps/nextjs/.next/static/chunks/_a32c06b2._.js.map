{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/packages/ui/src/progress.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\n\nimport { cn } from \".\";\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className,\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,uKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,iIAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,uKAAA,CAAA,YAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,uKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/apps/nextjs/src/hooks/useMultipartUpload.tsx"],"sourcesContent":["import { useMutation, useQueryClient } from \"@tanstack/react-query\";\n\nimport { toast } from \"@acme/ui/toast\";\n\nimport { useTRPC } from \"~/trpc/react\";\n\n// import * as Sentry from \"@sentry/nextjs\";\n\nconst CHUNK_SIZE = 5 * 1024 * 1024;\n\nexport interface UploadState {\n  uploaded: number;\n  total: number;\n  percentage: number;\n  error: string | null;\n}\n\nexport interface CompletedPart {\n  ETag: string;\n  PartNumber: number;\n}\n\ninterface MultipartConfig {\n  videoId: string;\n  onError?: (error: Error) => void;\n  onProgress?: (state: UploadState) => void;\n  createdAt?: string;\n}\n\nexport const useMultipartUpload = () => {\n  const trpc = useTRPC();\n\n  const queryClient = useQueryClient();\n  const { mutateAsync: initiateUpload } = useMutation(\n    trpc.aws.initiateMultipartUpload.mutationOptions({\n      onSuccess: async () => {\n        // form.reset();\n        // await queryClient.invalidateQueries(trpc.post.pathFilter());\n      },\n      onError: (err) => {\n        toast.error(\n          err.data?.code === \"UNAUTHORIZED\"\n            ? \"You must be logged in to post\"\n            : \"Failed to create post\",\n        );\n      },\n    }),\n  );\n  const { mutateAsync: completeUpload } = useMutation(\n    trpc.aws.completeMultipartUpload.mutationOptions({\n      onSuccess: async () => {\n        await queryClient.invalidateQueries(trpc.video.pathFilter());\n      },\n    }),\n  );\n\n  const uploadPart = async (\n    chunk: Blob,\n    url: string,\n    partNumber: number,\n    retries = 3,\n  ): Promise<CompletedPart> => {\n    try {\n      const response = await fetch(url, {\n        method: \"PUT\",\n        body: chunk,\n      });\n\n      if (!response.ok) {\n        throw new Error(`Upload failed with status ${response.status}`);\n      }\n\n      const eTag = response.headers.get(\"etag\") || response.headers.get(\"ETag\");\n      if (!eTag) {\n        throw new Error(\"No ETag received\");\n      }\n\n      return {\n        ETag: eTag.replace(/^\"(.*)\"$/, \"$1\"),\n        PartNumber: partNumber,\n      };\n    } catch (err) {\n      if (retries > 0) {\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n        return uploadPart(chunk, url, partNumber, retries - 1);\n      }\n      throw err;\n    }\n  };\n\n  const uploadFile = async (\n    file: File,\n    config: MultipartConfig,\n  ): Promise<string> => {\n    try {\n      const initialState: UploadState = {\n        uploaded: 0,\n        total: file.size,\n        percentage: 0,\n        error: null,\n      };\n\n      config.onProgress?.(initialState);\n\n      const chunks = Math.ceil(file.size / CHUNK_SIZE);\n      const { uploadId: multipartUploadId, signedUrls } = await initiateUpload({\n        videoId: config.videoId,\n        contentLength: file.size,\n        parts: chunks,\n      });\n\n      const uploads = signedUrls.map(({ url, partNumber }) => {\n        const start = (partNumber - 1) * CHUNK_SIZE;\n        const end = Math.min(start + CHUNK_SIZE, file.size);\n        const chunk = file.slice(start, end);\n        return uploadPart(chunk, url, partNumber);\n      });\n\n      // Track progress of all uploads\n      let completedSize = 0;\n      const progressPromises = uploads.map(async (promise, index) => {\n        await promise;\n        completedSize += Math.min(CHUNK_SIZE, file.size - index * CHUNK_SIZE);\n        config.onProgress?.({\n          uploaded: completedSize,\n          total: file.size,\n          percentage: Math.round((completedSize / file.size) * 100),\n          error: null,\n        });\n      });\n\n      // Wait for all uploads and progress updates\n      const [parts] = await Promise.all([\n        Promise.all(uploads),\n        Promise.all(progressPromises),\n      ]);\n\n      await completeUpload({\n        videoId: config.videoId,\n        uploadId: multipartUploadId,\n        parts,\n      });\n\n      return config.videoId;\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error(\"Upload failed\");\n      const errorMessage = error.message;\n\n      config.onProgress?.({\n        uploaded: 0,\n        total: file.size,\n        percentage: 0,\n        error: errorMessage,\n      });\n\n      if (config.onError) {\n        config.onError(error);\n      }\n\n      //   Sentry.captureException(err);\n      throw error;\n    }\n  };\n\n  return {\n    uploadFile,\n  };\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/apps/nextjs/src/app/%28dashboard%29/_components/video-dropzone.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback, useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useDropzone } from \"react-dropzone\";\n\nimport { cn } from \"@acme/ui\";\nimport { Button } from \"@acme/ui/button\";\nimport { Progress } from \"@acme/ui/progress\";\nimport { toast } from \"@acme/ui/toast\";\n\nimport type { UploadState } from \"~/hooks/useMultipartUpload\";\nimport { useMultipartUpload } from \"~/hooks/useMultipartUpload\";\nimport { useTRPC } from \"~/trpc/react\";\n\ninterface VideoDropzoneProps {\n  onUploadComplete?: (videoId: string) => void;\n  className?: string;\n}\n\nexport function VideoDropzone({\n  onUploadComplete,\n  className,\n}: VideoDropzoneProps) {\n  const trpc = useTRPC();\n  const { mutateAsync: createVideo } = useMutation(\n    trpc.video.create.mutationOptions(),\n  );\n\n  const [uploadState, setUploadState] = useState<UploadState>({\n    uploaded: 0,\n    total: 0,\n    percentage: 0,\n    error: null,\n  });\n  const [isUploading, setIsUploading] = useState(false);\n  const { uploadFile } = useMultipartUpload();\n\n  const onDrop = useCallback(\n    async (acceptedFiles: File[]) => {\n      const file = acceptedFiles[0];\n\n      if (!file) return;\n\n      // Validate file type\n      if (!file.type.startsWith(\"video/\")) {\n        toast.error(\"Please upload a video file\");\n        return;\n      }\n\n      try {\n        setIsUploading(true);\n        // Generate a unique ID for this video\n\n        const newVideoId = await createVideo({\n          title: file.name,\n        });\n\n        const id = newVideoId[0]?.id;\n\n        if (!id) {\n          throw new Error(\"Failed to create video\");\n        }\n\n        // Start upload\n        const uploadedVideoId = await uploadFile(file, {\n          videoId: id,\n          onProgress: (state) => {\n            setUploadState(state);\n            if (state.error) {\n              toast.error(`Upload failed: ${state.error}`);\n              setIsUploading(false);\n            }\n          },\n          onError: (error) => {\n            toast.error(`Upload error: ${error.message}`);\n            setIsUploading(false);\n          },\n        });\n\n        toast.success(\"Video uploaded successfully!\");\n        onUploadComplete?.(uploadedVideoId);\n        setIsUploading(false);\n      } catch (error) {\n        // Error is already handled by onError callback\n        setIsUploading(false);\n      }\n    },\n    [uploadFile, onUploadComplete],\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      \"video/*\": [],\n    },\n    multiple: false,\n    disabled: isUploading,\n  });\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      <div\n        {...getRootProps()}\n        className={cn(\n          \"flex w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed p-6 transition-colors\",\n          isDragActive\n            ? \"border-primary bg-primary/10\"\n            : \"border-muted-foreground/30\",\n          isUploading && \"pointer-events-none opacity-60\",\n        )}\n      >\n        <input {...getInputProps()} />\n\n        {isUploading ? (\n          <div className=\"w-full space-y-4\">\n            <div className=\"mb-1 flex items-center justify-between\">\n              <p className=\"text-sm font-medium\">Uploading video...</p>\n              <span className=\"text-sm\">\n                {uploadState.percentage.toFixed(0)}%\n              </span>\n            </div>\n            <Progress value={uploadState.percentage} className=\"h-2 w-full\" />\n            <p className=\"text-xs text-muted-foreground\">\n              {(uploadState.uploaded / (1024 * 1024)).toFixed(2)} MB of{\" \"}\n              {(uploadState.total / (1024 * 1024)).toFixed(2)} MB\n            </p>\n          </div>\n        ) : (\n          <>\n            <div className=\"mb-4\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth={1.5}\n                stroke=\"currentColor\"\n                className=\"h-12 w-12 text-muted-foreground\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n                />\n              </svg>\n            </div>\n            <p className=\"mb-2 text-sm font-medium\">\n              {isDragActive\n                ? \"Drop the video here\"\n                : \"Drag and drop a video file, or click to browse\"}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Supports most video formats (MP4, MOV, AVI, etc.)\n            </p>\n            <Button variant=\"outline\" className=\"mt-4\">\n              Select Video\n            </Button>\n          </>\n        )}\n      </div>\n\n      {uploadState.error && (\n        <div className=\"mt-4 rounded border border-destructive bg-destructive/10 p-3 text-sm text-destructive\">\n          {uploadState.error}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/packages/ui/src/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@acme/ui\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className,\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,iIAAA,CAAA,KAAE,AAAD,EACV,yDACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,iIAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,iIAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,iIAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,iIAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,iIAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 567, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/apps/nextjs/src/utils/cdn.ts"],"sourcesContent":["export const getCDNUrl = (path: string) => {\n  return `${process.env.NEXT_PUBLIC_CDN_URL}/${path}`;\n};\n"],"names":[],"mappings":";;;AACY;AADL,MAAM,YAAY,CAAC;IACxB,OAAO,iEAAmC,CAAC,EAAE,MAAM;AACrD","debugId":null}},
    {"offset": {"line": 577, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/apps/nextjs/src/app/%28dashboard%29/_components/video-card.tsx"],"sourcesContent":["import React from \"react\";\nimport Link from \"next/link\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Trash2 } from \"lucide-react\";\n\nimport { RouterOutputs } from \"@acme/api\";\nimport { Button } from \"@acme/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@acme/ui/card\";\nimport { toast } from \"@acme/ui/toast\";\n\nimport { useTRPC } from \"~/trpc/react\";\nimport { getCDNUrl } from \"~/utils/cdn\";\n\nexport const VideoCard = (props: {\n  video: RouterOutputs[\"video\"][\"all\"][number];\n}) => {\n  const { video } = props;\n\n  const trpc = useTRPC();\n  const queryClient = useQueryClient();\n  const deletePost = useMutation(\n    trpc.video.delete.mutationOptions({\n      onSuccess: async () => {\n        await queryClient.invalidateQueries(trpc.video.pathFilter());\n      },\n      onError: (err) => {\n        toast.error(\n          err.data?.code === \"UNAUTHORIZED\"\n            ? \"You must be logged in to delete a post\"\n            : \"Failed to delete post\",\n        );\n      },\n    }),\n  );\n\n  return (\n    <Card className=\"overflow-hidden transition-all hover:shadow-lg\">\n      <Link href={`/video/${video.id}`} className=\"block\">\n        <CardHeader className=\"pb-2\">\n          <CardTitle className=\"text-2xl font-bold text-primary\">\n            {video.title}\n          </CardTitle>\n        </CardHeader>\n\n        <CardContent className=\"p-0\">\n          <div className=\"relative\">\n            <video\n              className=\"h-64 w-full object-cover\"\n              src={getCDNUrl(`video/${video.id}`)}\n            />\n            <div className=\"absolute inset-0 flex items-center justify-center bg-black/5 transition-colors hover:bg-black/10\">\n              <div className=\"rounded-full bg-white/90 px-4 py-2 font-medium text-primary shadow-sm\">\n                View Details\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Link>\n\n      <CardFooter className=\"flex justify-between p-4 pt-2\">\n        <Link\n          href={`/video/${video.id}`}\n          className=\"text-sm text-muted-foreground hover:text-primary\"\n        >\n          View Comments\n        </Link>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"text-sm font-medium text-destructive hover:bg-destructive/10\"\n          onClick={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            deletePost.mutate(video.id);\n          }}\n        >\n          <Trash2 className=\"mr-1 h-4 w-4\" />\n          Delete\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n};\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AACA;AAGA;AACA;AAOA;AAAA;AAEA;AACA;;;;;;;;;;;AAEO,MAAM,YAAY,CAAC;;IAGxB,MAAM,EAAE,KAAK,EAAE,GAAG;IAElB,MAAM,OAAO,CAAA,GAAA,0IAAA,CAAA,UAAO,AAAD;IACnB,MAAM,cAAc,CAAA,GAAA,yLAAA,CAAA,iBAAc,AAAD;IACjC,MAAM,aAAa,CAAA,GAAA,iLAAA,CAAA,cAAW,AAAD,EAC3B,KAAK,KAAK,CAAC,MAAM,CAAC,eAAe,CAAC;QAChC,SAAS;iDAAE;gBACT,MAAM,YAAY,iBAAiB,CAAC,KAAK,KAAK,CAAC,UAAU;YAC3D;;QACA,OAAO;iDAAE,CAAC;gBACR,2IAAA,CAAA,QAAK,CAAC,KAAK,CACT,IAAI,IAAI,EAAE,SAAS,iBACf,2CACA;YAER;;IACF;IAGF,qBACE,6LAAC,iIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,6LAAC,+JAAA,CAAA,UAAI;gBAAC,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gBAAE,WAAU;;kCAC1C,6LAAC,iIAAA,CAAA,aAAU;wBAAC,WAAU;kCACpB,cAAA,6LAAC,iIAAA,CAAA,YAAS;4BAAC,WAAU;sCAClB,MAAM,KAAK;;;;;;;;;;;kCAIhB,6LAAC,iIAAA,CAAA,cAAW;wBAAC,WAAU;kCACrB,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,WAAU;oCACV,KAAK,CAAA,GAAA,wIAAA,CAAA,YAAS,AAAD,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;;;;;;8CAEpC,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;kDAAwE;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ/F,6LAAC,iIAAA,CAAA,aAAU;gBAAC,WAAU;;kCACpB,6LAAC,+JAAA,CAAA,UAAI;wBACH,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;wBAC1B,WAAU;kCACX;;;;;;kCAGD,6LAAC,mIAAA,CAAA,SAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,WAAU;wBACV,SAAS,CAAC;4BACR,EAAE,cAAc;4BAChB,EAAE,eAAe;4BACjB,WAAW,MAAM,CAAC,MAAM,EAAE;wBAC5B;;0CAEA,6LAAC,6MAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;;AAM7C;GArEa;;QAKE,0IAAA,CAAA,UAAO;QACA,yLAAA,CAAA,iBAAc;QACf,iLAAA,CAAA,cAAW;;;KAPnB","debugId":null}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/apps/nextjs/src/app/%28dashboard%29/_components/video-skeleton.tsx"],"sourcesContent":["import React from \"react\";\n\nexport const VideoSkeleton = () => {\n  return <div>VideoSkeleton</div>;\n};\n"],"names":[],"mappings":";;;;;AAEO,MAAM,gBAAgB;IAC3B,qBAAO,6LAAC;kBAAI;;;;;;AACd;KAFa","debugId":null}},
    {"offset": {"line": 779, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 785, "column": 0}, "map": {"version":3,"sources":["file:///Users/andreicruceru/comment.video/apps/nextjs/src/app/%28dashboard%29/_components/video-list.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { useSuspenseQuery } from \"@tanstack/react-query\";\n\nimport { useTRPC } from \"~/trpc/react\";\nimport { VideoCard } from \"./video-card\";\nimport { VideoSkeleton } from \"./video-skeleton\";\n\nexport const VideoList = () => {\n  const trpc = useTRPC();\n  const { data: videos } = useSuspenseQuery(trpc.video.all.queryOptions());\n\n  if (videos.length === 0) {\n    return (\n      <div className=\"relative flex w-full flex-col gap-4\">\n        <VideoSkeleton />\n        <VideoSkeleton />\n        <VideoSkeleton />\n\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black/10\">\n          <p className=\"text-2xl font-bold text-white\">No videos yet</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3\">\n      {videos.map((video) => {\n        return <VideoCard key={video.id} video={video} />;\n      })}\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAGA;AAEA;AACA;AACA;;;AAPA;;;;;AASO,MAAM,YAAY;;IACvB,MAAM,OAAO,CAAA,GAAA,0IAAA,CAAA,UAAO,AAAD;IACnB,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,CAAA,GAAA,sLAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK,KAAK,CAAC,GAAG,CAAC,YAAY;IAErE,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC,qLAAA,CAAA,gBAAa;;;;;8BACd,6LAAC,qLAAA,CAAA,gBAAa;;;;;8BACd,6LAAC,qLAAA,CAAA,gBAAa;;;;;8BAEd,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;;;;;;IAIrD;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC;YACX,qBAAO,6LAAC,iLAAA,CAAA,YAAS;gBAAgB,OAAO;eAAjB,MAAM,EAAE;;;;;QACjC;;;;;;AAGN;GAzBa;;QACE,0IAAA,CAAA,UAAO;QACK,sLAAA,CAAA,mBAAgB;;;KAF9B","debugId":null}},
    {"offset": {"line": 874, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}